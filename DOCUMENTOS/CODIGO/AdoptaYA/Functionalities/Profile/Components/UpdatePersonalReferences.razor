@using AdoptaYA.Functionalities.Profile.Model

<Loader Loading="@loading" />

<RadzenFieldset Text="Referencias Personales" Style="margin-top: 15px;">
    <RadzenStack Gap="1rem">

        @if (references != null && references.Count > 0)
        {
            @for (int i = 0; i < references.Count; i++)
            {
                var index = i;
                <RadzenCard>
                    <RadzenStack Gap="0.5rem">
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="10">
                                <RadzenText TextStyle="TextStyle.Subtitle2">
                                    Referencia @(index + 1)
                                </RadzenText>
                            </RadzenColumn>
                            <RadzenColumn Size="2" class="rz-text-align-end">
                                <RadzenButton Icon="delete"
                                              ButtonStyle="ButtonStyle.Danger"
                                              Size="ButtonSize.Small"
                                              Click="@(() => RemoveReference(index))" />
                            </RadzenColumn>
                        </RadzenRow>

                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="12" SizeMD="4">
                                <RadzenLabel Text="Nombre" Component="Name" />
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="8">
                                <RadzenTextBox @bind-Value="references[index].Name"
                                               Placeholder="Nombre completo"
                                               Style="width: 100%;" />
                            </RadzenColumn>
                        </RadzenRow>

                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="12" SizeMD="4">
                                <RadzenLabel Text="Teléfono" Component="CellPhone" />
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="8">
                                <RadzenTextBox @bind-Value="references[index].CellPhone"
                                               Placeholder="Número de teléfono"
                                               Style="width: 100%;" />
                            </RadzenColumn>
                        </RadzenRow>

                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="12" SizeMD="4">
                                <RadzenLabel Text="Vínculo" Component="Relationship" />
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="8">
                                <RadzenTextBox @bind-Value="references[index].Relationship"
                                               Placeholder="Relación con el solicitante"
                                               Style="width: 100%;" />
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenStack>
                </RadzenCard>
            }
        }

        <RadzenButton Icon="add" Text="Agregar Referencia" ButtonStyle="ButtonStyle.Success" Click="@AddReference" />

        <RadzenRow class="w-100" Gap="1rem">
            <RadzenColumn Size="6">
                <RadzenButton Icon="cancel" Text="Cancelar" ButtonStyle="ButtonStyle.Danger" Click="@Cancel" Style="width: 100%;" />
            </RadzenColumn>
            <RadzenColumn Size="6">
                <RadzenButton Icon="save" Text="Guardar" ButtonStyle="ButtonStyle.Primary" Click="@Save" Style="width: 100%;" />
            </RadzenColumn>
        </RadzenRow>


    </RadzenStack>
</RadzenFieldset>
